import{d as f,g as b,C as D,m as L,e as T,n as A}from"./index-89840f01.js";import{T as I}from"./index-bae49d81.js";import{P as z}from"./index-6877fd3c.js";import{L as P}from"./date-fe694504.js";import{_ as y,Q as N,D as M,R as $,G as k,T as O,U as R,V,W as C,X as H,C as W,H as x,Y as B,F as s,$ as U,I as g,O as F,N as Y,M as G,J as j,K as X}from"./install-da7cf9dc.js";var E=function(r){y(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return N(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,a,i){return i.point(a.getItemLayout(t))},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},e}(M);const J=E;var w=4,K=function(){function r(){}return r}(),m=function(r){y(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new K},e.prototype.buildPath=function(t,a){var i=a.points,n=a.size,o=this.symbolProxy,l=o.shape,c=t.getContext?t.getContext():t,h=c&&n[0]<w;if(h){this._ctx=c;return}this._ctx=null;for(var d=0;d<i.length;){var p=i[d++],u=i[d++];isNaN(p)||isNaN(u)||this.softClipShape&&!this.softClipShape.contain(p,u)||(l.x=p-n[0]/2,l.y=u-n[1]/2,l.width=n[0],l.height=n[1],o.buildPath(t,l,!0))}},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,i=t.size,n=this._ctx;if(n)for(var o=0;o<a.length;){var l=a[o++],c=a[o++];isNaN(l)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(l,c)||n.fillRect(l-i[0]/2,c-i[1]/2,i[0],i[1])}},e.prototype.findDataIndex=function(t,a){for(var i=this.shape,n=i.points,o=i.size,l=Math.max(o[0],4),c=Math.max(o[1],4),h=n.length/2-1;h>=0;h--){var d=h*2,p=n[d]-l/2,u=n[d+1]-c/2;if(t>=p&&a>=u&&t<=p+l&&a<=u+c)return h}return-1},e}($),Q=function(){function r(){this.group=new k}return r.prototype.isPersistent=function(){return!this._incremental},r.prototype.updateData=function(e,t){this.group.removeAll();var a=new m({rectHover:!0,cursor:"default"});a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,!1,t),this.group.add(a),this._incremental=null},r.prototype.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var i=(a.endIndex-a.startIndex)*2,n=a.startIndex*4*2;t=new Float32Array(t.buffer,n,i)}a.setShape("points",t)})}},r.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new O({silent:!0})),this.group.add(this._incremental)):this._incremental=null},r.prototype.incrementalUpdate=function(e,t,a){var i;this._incremental?(i=new m,this._incremental.addDisplayable(i,!0)):(i=new m({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end}),i.incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,!!this._incremental,a)},r.prototype._setCommon=function(e,t,a,i){var n=t.hostModel;i=i||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=i.clipShape||null,e.symbolProxy=R(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var l=e.shape.size[0]<w;e.useStyle(n.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var c=t.getVisual("style"),h=c&&c.fill;if(h&&e.setColor(h),!a){var d=V(e);d.seriesIndex=n.seriesIndex,e.on("mousemove",function(p){d.dataIndex=null;var u=e.findDataIndex(p.offsetX,p.offsetY);u>=0&&(d.dataIndex=u+(e.startIndex||0))})}},r.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},r.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},r}();const Z=Q;var q=function(r){y(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,i){var n=t.getData(),o=this._updateSymbolDraw(n,t);o.updateData(n,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,i){var n=t.getData(),o=this._updateSymbolDraw(n,t);o.incrementalPrepareUpdate(n),this._finished=!1},e.prototype.incrementalRender=function(t,a,i){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,i){var n=t.getData();if(this.group.dirty(),!this._finished||n.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var o=C("").reset(t,a,i);o.progress&&o.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},e.prototype._getClipShape=function(t){var a=t.coordinateSystem,i=a&&a.getArea&&a.getArea();return t.get("clip",!0)?i:null},e.prototype._updateSymbolDraw=function(t,a){var i=this._symbolDraw,n=a.pipelineContext,o=n.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Z:new H,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(W);const tt=q;function et(r){x(B),r.registerSeriesModel(J),r.registerChartView(tt),r.registerLayout(C("scatter"))}const rt=[{title:"总申请数（次）",number:"1126",upTrend:"10%"},{title:"供应商数量（个）",number:"13",downTrend:"13%"},{title:"采购商品品类（类）",number:"4",upTrend:"10%"},{title:"申请人数量（人）",number:90,downTrend:"44%",leftType:"icon-file-paste"},{title:"申请完成率（%）",number:80.5,upTrend:"70%"},{title:"到货及时率（%）",number:78,upTrend:"16%"}],at=[{description:"SSL证书又叫服务器证书，腾讯云为您提供证书的一站式服务，包括免费、付费证书的申请、管理及部",index:1,isSetup:!0,name:"SSL证书",type:4},{description:"SSL证书又叫服务器证书，腾讯云为您提供证书的一站式服务，包括免费、付费证书的申请、管理及部",index:1,isSetup:!0,name:"SSL证书",type:4}];function S({dateTime:r=[],placeholderColor:e,borderColor:t}){const i=[],n=[],o=[];for(let l=0;l<40;l++){if(r.length>0){const c=(new Date(r[1]).getTime()-new Date(r[0]).getTime())/40,h=new Date(r[0]).getTime()+c*l;i.push(f(h).format("MM-DD"))}else i.push(f().subtract(40-l,"day").format("MM-DD"));n.push(s().toString()),o.push(s().toString())}return{color:b(),xAxis:{data:i,axisLabel:{color:e},splitLine:{show:!1},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},nameTextStyle:{padding:[0,0,0,60]},axisTick:{show:!1,axisLine:{show:!1}},axisLine:{show:!1},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},grid:{top:"5px",left:"25px",right:"5px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:["按摩仪","咖啡机"],itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:e}},series:[{name:"按摩仪",symbolSize:10,data:o.reverse(),type:"scatter"},{name:"咖啡机",symbolSize:10,data:n.concat(n.reverse()),type:"scatter"}]}}function v({dateTime:r=[],placeholderColor:e,borderColor:t}){let a=["周一","周二","周三","周四","周五","周六","周日"];return r.length>0&&(a=U(r,7)),{color:b(),grid:{top:"5%",right:"10px",left:"30px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:["杯子","茶叶","蜂蜜","面粉"],textStyle:{fontSize:12,color:e}},xAxis:{type:"category",data:a,boundaryGap:!1,axisLabel:{color:e},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},series:[{showSymbol:!0,symbol:"circle",symbolSize:8,name:"杯子",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{normal:{borderColor:t,borderWidth:1}}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"茶叶",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{normal:{borderColor:t,borderWidth:1}}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"蜂蜜",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{normal:{borderColor:t,borderWidth:1}}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"面粉",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{normal:{borderColor:t,borderWidth:1}}}]}}x([F,Y,G,j,et,X]);const it={name:"DashboardDetail",components:{Trend:I,ProductCard:z,ChevronRightIcon:D},data(){return{PANE_LIST_DATA:rt,PRODUCT_LIST:at,dashboardBase:"",lineContainer:"",scatterContainer:"",lineChart:"",scatterChart:"",productList:[{description:"SSL证书又叫服务器证书，腾讯云为您提供证书的一站式服务，包括免费、付费证书的申请、管理及部",index:1,isSetup:!0,name:"SSL证书",type:4}],LAST_7_DAYS:P}},computed:{...L("setting",["brandTheme","mode"])},watch:{brandTheme(){T([this.lineChart,this.scatterChart])},mode(){this.renderCharts()}},mounted(){this.$nextTick(()=>{this.updateContainer()}),this.renderCharts()},methods:{onSatisfyChange(r){const{chartColors:e}=this.$store.state.setting;this.scatterChart.setOption(S({dateTime:r,...e}))},onMaterialChange(r){const{chartColors:e}=this.$store.state.setting;this.lineChart.setOption(v({dateTime:r,...e}))},updateContainer(){var r,e,t,a;(e=(r=this.lineChart).resize)==null||e.call(r,{width:this.lineContainer.clientWidth,height:this.lineContainer.clientHeight}),(a=(t=this.scatterChart).resize)==null||a.call(t,{width:this.scatterContainer.clientWidth,height:this.scatterContainer.clientHeight})},renderCharts(){const{chartColors:r}=this.$store.state.setting;this.lineContainer||(this.lineContainer=document.getElementById("lineContainer")),this.lineChart=g(this.lineContainer),this.lineChart.setOption(v({...r})),window.addEventListener("resize",this.updateContainer,!1),this.scatterContainer||(this.scatterContainer=document.getElementById("scatterContainer")),this.scatterChart=g(this.scatterContainer),this.scatterChart.setOption(S({...r}))}}};var nt=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"dashboard-detail"},[t("t-card",{staticClass:"dashboard-detail-card",attrs:{title:"本月采购申请情况",bordered:!1}},[t("t-row",{attrs:{gutter:[16,16]}},r._l(r.PANE_LIST_DATA,function(a,i){return t("t-col",{key:i,attrs:{xs:6,xl:3}},[t("t-card",{class:["dashboard-list-card"],attrs:{description:a.title}},[t("div",{staticClass:"dashboard-list-card__number"},[r._v(r._s(a.number))]),t("div",{staticClass:"dashboard-list-card__text"},[t("div",{staticClass:"dashboard-list-card__text-left"},[r._v(" 环比 "),t("trend",{staticClass:"icon",attrs:{type:a.upTrend?"up":"down",describe:a.upTrend||a.downTrend}})],1),t("chevron-right-icon")],1)])],1)}),1)],1),t("t-row",{staticClass:"row-margin",attrs:{gutter:[16,16]}},[t("t-col",{attrs:{xs:12,xl:9}},[t("t-card",{class:{"dashboard-detail-card":!0},attrs:{title:"采购商品申请趋势",subtitle:"(件)",bordered:!1},scopedSlots:r._u([{key:"actions",fn:function(){return[t("t-date-range-picker",{staticStyle:{width:"250px"},attrs:{"default-value":r.LAST_7_DAYS,theme:"primary",mode:"date"},on:{change:r.onMaterialChange}})]},proxy:!0}])},[t("div",{ref:"lineContainer",staticStyle:{width:"100%",height:"410px"},attrs:{id:"lineContainer"}})])],1),t("t-col",{attrs:{xs:12,xl:3}},r._l(r.PRODUCT_LIST,function(a,i){return t("product-card",{key:i,class:{"row-margin":i!==0},attrs:{product:a}})}),1)],1),t("t-card",{staticClass:"row-margin",class:{"dashboard-detail-card":!0},attrs:{title:"采购商品满意度分布",bordered:!1},scopedSlots:r._u([{key:"actions",fn:function(){return[t("t-date-range-picker",{staticStyle:{display:"inline-block","margin-right":"8px",width:"250px"},attrs:{defaultValue:r.LAST_7_DAYS,theme:"primary",mode:"date"},on:{change:r.onSatisfyChange}}),t("t-button",[r._v("导出数据")])]},proxy:!0}])},[t("div",{staticStyle:{width:"100%",height:"374px"},attrs:{id:"scatterContainer"}})])],1)},st=[];const _={};var ot=A(it,nt,st,!1,lt,"1ed21aef",null,null);function lt(r){for(let e in _)this[e]=_[e]}const mt=function(){return ot.exports}();export{mt as default};

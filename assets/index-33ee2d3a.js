import{f as o,p as r,n as l}from"./index-89840f01.js";import{P as c}from"./index-6877fd3c.js";const u={name:"",status:"",description:"",type:"",mark:"",amount:0},d={name:"ListCard",components:{SearchIcon:o,ProductCard:c},data(){return{pagination:{current:1,pageSize:12,total:0},prefix:r,productList:[],value:"first",rowKey:"index",tableLayout:"auto",verticalAlign:"top",bordered:!0,hover:!0,rowClassName:t=>`${t}-class`,formData:{...u},options:[{label:"网关",value:"1"},{label:"人工智能",value:"2"},{label:"CVM",value:"3"}],formVisible:!1,textareaValue:"",rules:{name:[{required:!0,message:"请输入产品名称",type:"error"}]},searchValue:"",confirmVisible:!1,deleteProduct:void 0,dataLoading:!1}},computed:{confirmBody(){const{deleteProduct:t}=this;return t?`删除后，${t.name}的所有产品信息将被清空, 且无法恢复`:""}},mounted(){this.dataLoading=!0,this.$request.get("/api/get-card-list").then(t=>{if(t.code===0){const{list:i=[]}=t.data;this.productList=i,this.pagination={...this.pagination,total:i.length}}}).catch(t=>{console.log(t)}).finally(()=>{this.dataLoading=!1})},methods:{onPageSizeChange(t){this.pagination.pageSize=t,this.pagination.current=1},onCurrentChange(t){this.pagination.current=t},onSubmit({result:t,firstError:i}){i?(console.log("Errors: ",t),this.$message.warning(i)):(this.$message.success("提交成功"),this.formVisible=!1)},onClickCloseBtn(){this.formVisible=!1,this.formData={}},handleDeleteItem(t){this.confirmVisible=!0,this.deleteProduct=t},onConfirmDelete(){const{index:t}=this.deleteProduct;this.productList.splice(t-1,1),this.confirmVisible=!1,this.$message.success("删除成功")},onCancel(){this.deleteProduct=void 0,this.formData={}},handleManageProduct(t){this.formVisible=!0,this.formData={...t,status:t!=null&&t.isSetup?"1":"0"}}}};var m=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"list-card"},[e("div",{staticClass:"list-card-operation"},[e("t-button",{on:{click:function(a){t.formVisible=!0}}},[t._v("新建产品")]),e("t-input",{staticClass:"search-input",attrs:{placeholder:"请输入你需要搜索的内容",clearable:""},scopedSlots:t._u([{key:"suffix-icon",fn:function(){return[t.searchValue===""?e("search-icon",{attrs:{size:"20px"}}):t._e()]},proxy:!0}]),model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}})],1),t.pagination.total>0&&!t.dataLoading?[e("div",{staticClass:"list-card-items"},[e("t-row",{attrs:{gutter:[16,16]}},t._l(t.productList.slice(t.pagination.pageSize*(t.pagination.current-1),t.pagination.pageSize*t.pagination.current),function(a){return e("t-col",{key:a.index,attrs:{lg:4,xs:6,xl:3}},[e("product-card",{attrs:{product:a},on:{"delete-item":t.handleDeleteItem,"manage-product":t.handleManageProduct}})],1)}),1)],1),e("div",{staticClass:"list-card-pagination"},[e("t-pagination",{attrs:{total:t.pagination.total,pageSizeOptions:[12,24,36],"page-size":t.pagination.pageSize},on:{"update:pageSize":function(a){return t.$set(t.pagination,"pageSize",a)},"update:page-size":function(a){return t.$set(t.pagination,"pageSize",a)},"page-size-change":t.onPageSizeChange,"current-change":t.onCurrentChange},model:{value:t.pagination.current,callback:function(a){t.$set(t.pagination,"current",a)},expression:"pagination.current"}})],1)]:t.dataLoading?e("div",{staticClass:"list-card-loading"},[e("t-loading",{attrs:{text:"加载中..."}})],1):t._e(),e("t-dialog",{attrs:{header:"新建产品",visible:t.formVisible,width:680,footer:!1},on:{"update:visible":function(a){t.formVisible=a}}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("t-form",{ref:"form",attrs:{data:t.formData,rules:t.rules,labelWidth:100},on:{submit:t.onSubmit}},[e("t-form-item",{attrs:{label:"产品名称",name:"name"}},[e("t-input",{style:{width:"480px"},attrs:{placeholder:"请输入产品名称"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}})],1),e("t-form-item",{attrs:{label:"产品状态",name:"status"}},[e("t-radio-group",{model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}},[e("t-radio",{attrs:{value:"0"}},[t._v("已停用")]),e("t-radio",{attrs:{value:"1"}},[t._v("已启用")])],1)],1),e("t-form-item",{attrs:{label:"产品描述",name:"description"}},[e("t-input",{style:{width:"480px"},attrs:{placeholder:"请输入产品描述"},model:{value:t.formData.description,callback:function(a){t.$set(t.formData,"description",a)},expression:"formData.description"}})],1),e("t-form-item",{attrs:{label:"产品类型",name:"type"}},[e("t-select",{style:{width:"480px"},attrs:{clearable:""},model:{value:t.formData.type,callback:function(a){t.$set(t.formData,"type",a)},expression:"formData.type"}},t._l(t.options,function(a,s){return e("t-option",{key:s,attrs:{value:a.value,label:a.label}},[t._v(" "+t._s(a.label)+" ")])}),1)],1),e("t-form-item",{attrs:{label:"备注",name:"mark"}},[e("t-textarea",{style:{width:"480px"},attrs:{placeholder:"请输入内容",name:"description"},model:{value:t.textareaValue,callback:function(a){t.textareaValue=a},expression:"textareaValue"}})],1),e("t-form-item",{staticStyle:{float:"right"}},[e("t-button",{attrs:{variant:"outline"},on:{click:t.onClickCloseBtn}},[t._v("取消")]),e("t-button",{attrs:{theme:"primary",type:"submit"}},[t._v("确定")])],1)],1)],1)]),e("t-dialog",{attrs:{header:"确认删除所选产品？",body:t.confirmBody,visible:t.confirmVisible,onCancel:t.onCancel},on:{"update:visible":function(a){t.confirmVisible=a},confirm:t.onConfirmDelete}})],2)},p=[];const n={};var f=l(d,m,p,!1,g,"19fa24f8",null,null);function g(t){for(let i in n)this[i]=n[i]}const v=function(){return f.exports}();export{v as default};

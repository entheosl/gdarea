import{V as d,_ as h,u as b,I as C,a as y,C as k,n as v,A as w,p as O}from"./index-89840f01.js";import{O as z}from"./order-descending-6bad015a.js";var P=["size"];function l(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,a)}return e}function i(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?l(Object(e),!0).forEach(function(a){y(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}var x={tag:"svg",attrs:{fill:"none",viewBox:"0 0 16 16",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M1 3h1.58l1.39 8.33c.06.39.4.67.78.67H14v-1H4.92L4.6 9h8.63a.8.8 0 00.78-.6l.85-3.4a.8.8 0 00-.78-1H3.76l-.23-1.33A.8.8 0 002.75 2H1v1zm12.07 5H4.42l-.5-3h9.9l-.75 3zM4.75 14.5a.75.75 0 100-1.5.75.75 0 000 1.5zM12.81 14.5a.75.75 0 100-1.5.75.75 0 000 1.5z",fillOpacity:.9}}]},D=d.extend({name:"CartIcon",functional:!0,props:{size:{type:String},onClick:{type:Function}},render:function(s,e){var a=e.props,r=e.data,n=a.size,_=h(a,P),o=b(n),g=o.className,m=o.style,f=i(i({},_||{}),{},{id:"cart",icon:x,staticClass:g,style:m});return r.props=f,s(C,r)}});class I{getBaseInfoData(){return[{name:"合同名称",value:"总部办公用品采购项目"},{name:"合同状态",value:"履行中",type:{key:"contractStatus",value:"inProgress"}},{name:"合同编号",value:"BH00010"},{name:"合同类型",value:"主合同"},{name:"合同收付类型",value:"付款"},{name:"合同金额",value:"5,000,000元"},{name:"甲方",value:"腾讯科技（深圳）有限公司"},{name:"乙方",value:"欧尚"},{name:"合同签订日期",value:"2020-12-20"},{name:"合同生效日期",value:"2021-01-20"},{name:"合同结束日期",value:"2022-12-20"},{name:"合同附件",value:"总部办公用品采购项目合同.pdf",type:{key:"contractAnnex",value:"pdf"}},{name:"备注",value:"--"},{name:"创建时间",value:"2020-12-22 10:00:00"}]}getTableColumns(){return[{width:300,ellipsis:!0,colKey:"index",title:"申请号",sorter:(s,e)=>s.index.substr(3)-e.index.substr(3)},{width:200,ellipsis:!0,colKey:"pdName",title:"产品名称",sorter:(s,e)=>s.pdName.length-e.pdName.length},{width:200,ellipsis:!0,colKey:"pdNum",title:"产品编号"},{width:200,ellipsis:!0,colKey:"purchaseNum",title:"采购数量",sorter:(s,e)=>s.purchaseNum-e.purchaseNum},{width:200,ellipsis:!0,colKey:"adminName",title:"申请部门"},{width:200,ellipsis:!0,colKey:"updateTime",title:"创建时间",sorter:(s,e)=>Date.parse(s.updateTime)-Date.parse(e.updateTime)},{align:"left",fixed:"right",width:200,className:"test2",colKey:"op",title:"操作"}]}getPropUpData(){return{formData:{...{name:"",warning:"",success:"",failB:"",warningB:"",loading:"",add:"",help:""}},courseOptions:[{label:"语文",value:"1"},{label:"数学",value:"2"},{label:"英语",value:"3"}],options:[{label:"资源初始化后",value:"beijing"},{label:"上海",value:"shanghai"}],options1:[{label:"资源初始化后",value:"guangzhou"},{label:"深圳",value:"shenzhen"},{label:"东莞",value:"dongguang"}],options2:[{label:"资源初始化后",value:"nanjing"},{label:"苏州",value:"苏州"},{label:"无锡",value:"wuxi"}],tSelectOptions:[{label:"Sanzhang",value:"1"},{label:"ls",value:"2"},{label:"James",value:"3"}]}}}const c=new I,S=d.extend({components:{ChevronRightIcon:k,CartIcon:D},props:{data:{type:Object,default:()=>({})}}});var N=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"operator-block operator-gap"},[e("div",{staticClass:"operator-content"},[e("div",{staticClass:"operator-title"},[e("cart-icon",{staticClass:"operator-title-icon"}),e("h1",[t._v(t._s(t.data.name))]),e("div",{staticClass:"operator-title-subtitle"},[t._v(" "+t._s(t.data.subtitle)+" ")]),e("div",{staticClass:"operator-title-tags"},[e("t-tag",{staticClass:"operator-title-tag",attrs:{theme:"success",size:"small"}},[t._v(" "+t._s(t.data.size)+" ")]),e("t-tag",{staticClass:"operator-title-tag",attrs:{size:"small"}},[t._v(" "+t._s(t.data.cpu)+" ")]),e("t-tag",{staticClass:"operator-title-tag",attrs:{size:"small"}},[t._v(" "+t._s(t.data.memory)+" ")])],1)],1),e("div",{staticClass:"operator-item"},[e("span",{staticClass:"operator-item-info"},[t._v(t._s(t.data.info))]),e("chevron-right-icon",{staticClass:"operator-item-icon",attrs:{size:"small"}})],1)]),e("div",{staticClass:"operator-footer"},[e("span",{staticClass:"operator-footer-percentage"},[t._v(t._s(t.data.use)+" / "+t._s(t.data.stock)+"（台）")]),e("t-progress",{staticClass:"operator-progress",attrs:{theme:"line",percentage:t.data.use/t.data.stock*100,label:!1,color:t.data.use/t.data.stock<.5?"#E24D59":"","track-color":t.data.use/t.data.stock<.5?"var(--td-error-color-1)":"var(--td-brand-color-1)"}})],1)])},T=[];const u={};var j=v(S,N,T,!1,A,"525d80d9",null,null);function A(t){for(let s in u)this[s]=u[s]}const B=function(){return j.exports}(),M=[{name:"MacBook Pro 2021",subTitle:"MacBook Pro 2021",size:"13.3 英寸",cpu:"Apple M1",memory:"RAM 16GB",info:"最高可选配 16GB 内存 · 最高可选配 2TB 存储设备 电池续航最长达 18 小时",use:1420,stock:1500},{name:"Surface Laptop Go",subTitle:"微软（Microsoft Corporation）",size:"12.4 英寸",cpu:"Core i7",memory:"RAM 16GB",info:"常规使用 Surface，续航时间最长可达13小时 随时伴您工作",use:120,stock:2e3}],$={name:"DetailAdvanced",components:{Product:B,OrderDescendingIcon:z,AddIcon:w},data(){return{data:[],prefix:O,updateCurrent:0,columns:c.getTableColumns(),baseInfoData:c.getBaseInfoData(),bordered:!0,hover:!0,visible:!1,pagination:{defaultPageSize:10,total:100,defaultCurrent:1,pageSizeOptions:[]},PRODUCT_LIST:M}},async mounted(){setInterval(()=>{this.updateCurrent>5&&(this.updateCurrent=-1),this.updateCurrent+=1},2e3),this.$request.get("/api/get-purchase-list").then(t=>{if(t.code===0){const{list:s=[]}=t.data;this.data=s,this.pagination={...this.pagination,total:s.length}}}).catch(t=>{console.log(t)})},methods:{onAlertChange(t){console.log(t)},sortChange(t){console.log(t)},rehandleChange(t,s){console.log("统一Change",t,s)},listClick(t){console.log(t),this.visible=!0},deleteClickOp(t){console.log(t,"e"),this.data.splice(t.rowIndex,1)},onConfirm(){this.visible=!1}}};var K=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"detail-advanced"},[e("t-card",{staticClass:"advanced-card",attrs:{title:"基本信息",bordered:!1}},[e("div",{staticClass:"info-block"},t._l(t.baseInfoData,function(a,r){var n;return e("div",{key:r,staticClass:"info-item"},[e("h1",[t._v(t._s(a.name))]),e("span",{class:(n={},n.inProgress=a.type&&a.type.value==="inProgress",n.pdf=a.type&&a.type.value==="pdf",n)},[a.type&&a.type.key==="contractStatus"?e("i"):t._e(),t._v(" "+t._s(a.value)+" ")])])}),0)]),e("t-card",{staticClass:"container-base-margin-top",attrs:{title:"发票进度",bordered:!1}},[e("t-row",{class:t.prefix+"-operator-row row-padding",attrs:{justify:"space-between"}},[[e("t-steps",{attrs:{current:t.updateCurrent}},[e("t-step-item",{attrs:{title:"申请提交",content:"已于12月21日提交"}}),e("t-step-item",{attrs:{title:"电子发票",content:"预计1～3个工作日"}}),e("t-step-item",{attrs:{title:"发票已邮寄",content:"电子发票开出后7个工作日内联系"}}),e("t-step-item",{attrs:{title:"完成",content:""}})],1)]],2)],1),e("t-card",{staticClass:"container-base-margin-top",attrs:{title:"产品目录",bordered:!1}},[e("template",{slot:"option"},[e("t-radio-group",{attrs:{"default-value":"dateVal"},on:{change:t.onAlertChange}},[e("t-radio-button",{attrs:{value:"dateVal"}},[t._v("季度")]),e("t-radio-button",{attrs:{value:"monthVal"}},[t._v("月份")])],1)],1),e("t-row",{staticClass:"product-block-container",attrs:{gutter:16}},[e("t-col",{attrs:{xl:4}},[e("div",{staticClass:"product-add"},[e("div",{staticClass:"product-sub"},[e("add-icon",{staticClass:"product-sub-icon"}),e("span",[t._v("新增产品")])],1)])]),t._l(t.PRODUCT_LIST,function(a,r){return e("t-col",{key:r,attrs:{xl:4}},[e("product",{attrs:{data:a}})],1)})],2)],2),e("t-card",{staticClass:"container-base-margin-top",attrs:{title:"产品采购明细",bordered:!1}},[e("t-table",{attrs:{columns:t.columns,data:t.data,pagination:t.pagination,hover:t.hover,size:"large","row-key":"index"},on:{"sort-change":t.sortChange,change:t.rehandleChange},scopedSlots:t._u([{key:"pdName",fn:function(a){var r=a.row;return[e("span",[t._v(" "+t._s(r.pdName)+" "),r.pdType?e("t-tag",{attrs:{size:"small"}},[t._v(t._s(r.pdType))]):t._e()],1)]}},{key:"purchaseNum",fn:function(a){var r=a.row;return[e("span",[t._v(" "+t._s(r.purchaseNum)+" "),r.purchaseNum>50?e("t-tag",{attrs:{theme:"danger",variant:"light",size:"small"}},[t._v("超预算")]):t._e()],1)]}},{key:"op",fn:function(a){return[e("a",{staticClass:"t-button-link",on:{click:function(r){return t.listClick(a)}}},[t._v("管理")]),e("a",{staticClass:"t-button-link",on:{click:function(r){return t.deleteClickOp(a)}}},[t._v("删除")])]}}])},[e("order-descending-icon",{attrs:{slot:"op-column"},slot:"op-column"})],1)],1),e("t-dialog",{attrs:{header:"基本信息",visible:t.visible},on:{"update:visible":function(a){t.visible=a},confirm:t.onConfirm}},[e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticClass:"dialog-info-block"},t._l(t.baseInfoData,function(a,r){var n;return e("div",{key:r,staticClass:"info-item"},[e("h1",[t._v(t._s(a.name))]),e("span",{class:(n={},n.inProgress=a.type&&a.type.value==="inProgress",n.pdf=a.type&&a.type.value==="pdf",n)},[a.type&&a.type.key==="contractStatus"?e("i"):t._e(),t._v(" "+t._s(a.value)+" ")])])}),0)])])],1)},R=[];const p={};var H=v($,K,R,!1,L,"5b668453",null,null);function L(t){for(let s in p)this[s]=p[s]}const G=function(){return H.exports}();export{G as default};

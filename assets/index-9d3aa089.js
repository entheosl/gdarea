import{V as h,_ as m,u as y,I as _,a as b,D as O,p as P,m as D,j as C,n as j}from"./index-89840f01.js";import{N as S}from"./index-cce7da55.js";var z=["size"];function p(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,a)}return e}function d(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?p(Object(e),!0).forEach(function(a){b(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}var I={tag:"svg",attrs:{fill:"none",viewBox:"0 0 16 16",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4.64 10.5H13V4H3v7.87l1.64-1.37zm-2.15 3.09a.3.3 0 01-.49-.23V4a1 1 0 011-1h10a1 1 0 011 1v6.5a1 1 0 01-1 1H5l-2.5 2.09z",fillOpacity:.9}}]},M=h.extend({name:"ChatIcon",functional:!0,props:{size:{type:String},onClick:{type:Function}},render:function(s,e){var a=e.props,r=e.data,n=a.size,o=m(a,z),i=y(n),l=i.className,c=i.style,u=d(d({},o||{}),{},{id:"chat",icon:I,staticClass:l,style:c});return r.props=u,s(_,r)}}),w=["size"];function f(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,a)}return e}function v(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?f(Object(e),!0).forEach(function(a){b(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}var x={tag:"svg",attrs:{fill:"none",viewBox:"0 0 16 16",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 3h9v9h1V3a1 1 0 00-1-1H4v1z",fillOpacity:.9}},{tag:"path",attrs:{fill:"currentColor",d:"M6.58 9.42v2.91h1V9.42h2.75v-1H7.58V5.67h-1v2.75H3.67v1h2.91z",fillOpacity:.9}},{tag:"path",attrs:{fill:"currentColor",d:"M2 13a1 1 0 001 1h8a1 1 0 001-1V5a1 1 0 00-1-1H3a1 1 0 00-1 1v8zm1-8h8v8H3V5z",fillOpacity:.9}}]},V=h.extend({name:"QueueIcon",functional:!0,props:{size:{type:String},onClick:{type:Function}},render:function(s,e){var a=e.props,r=e.data,n=a.size,o=m(a,w),i=y(n),l=i.className,c=i.style,u=v(v({},o||{}),{},{id:"queue",icon:x,staticClass:l,style:c});return r.props=u,s(_,r)}});const k=[{label:"全部通知",value:"msgData"},{label:"未读通知",value:"unreadMsg"},{label:"已读通知",value:"readMsg"}],$={name:"DetailSecondary",components:{QueueIcon:V,DeleteIcon:O,ChatIcon:M},data(){return{NOTIFICATION_TYPES:S,TAB_LIST:k,prefix:P,data:[],tabValue:"msgData",visible:!1,selectedItem:void 0}},computed:{...D("notification",["msgData"]),...C("notification",["unreadMsg","readMsg"]),msgDataList(){return this.tabValue==="msgData"?this.msgData:this.tabValue==="unreadMsg"?this.unreadMsg:this.tabValue==="readMsg"?this.readMsg:[]}},methods:{handleClickDeleteBtn(t){this.visible=!0,this.selectedItem=t},setReadStatus(t){const s=this.msgData;s.forEach(e=>{e.id===t.id&&e.status&&(e.status=!1)}),this.$store.commit("notification/setMsgData",s)},deleteMsg(){const t=this.selectedItem,s=this.msgData;s.forEach((e,a)=>{e.id===t.id&&s.splice(a,1)}),this.visible=!1,this.$store.commit("notification/setMsgData",s)}}};var T=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"secondary-notification"},[e("t-tabs",{model:{value:t.tabValue,callback:function(a){t.tabValue=a},expression:"tabValue"}},t._l(t.TAB_LIST,function(a,r){return e("t-tab-panel",{key:r,attrs:{value:a.value,label:a.label}},[t.msgDataList.length>0?e("t-list",{staticClass:"secondary-msg-list",attrs:{split:!0}},t._l(t.msgDataList,function(n,o){return e("t-list-item",{key:o,scopedSlots:t._u([{key:"action",fn:function(){return[e("span",{staticClass:"msg-date"},[t._v(t._s(n.date))]),e("div",{staticClass:"msg-action"},[e("t-tooltip",{staticClass:"set-read-icon",attrs:{"overlay-style":{margin:"6px"},content:n.status?"设为已读":"设为未读"}},[e("span",{staticClass:"msg-action-icon",on:{click:function(i){return t.setReadStatus(n)}}},[n.status?e("queue-icon",{attrs:{size:"16px"}}):e("chat-icon")],1)]),e("t-tooltip",{attrs:{content:"删除通知","overlay-style":{margin:"6px"}}},[e("span",{on:{click:function(i){return t.handleClickDeleteBtn(n)}}},[e("delete-icon",{attrs:{size:"16px"}})],1)])],1)]},proxy:!0}],null,!0)},[e("p",{class:["content",{unread:n.status}],on:{click:function(i){return t.setReadStatus(n)}}},[e("t-tag",{attrs:{size:"small",theme:t.NOTIFICATION_TYPES[n.quality],variant:"light"}},[t._v(" "+t._s(n.type)+" ")]),t._v(" "+t._s(n.content)+" ")],1)])}),1):e("div",{staticClass:"secondary-msg-list__empty-list"},[e("img",{attrs:{src:"https://tdesign.gtimg.com/pro-template/personal/nothing.png",alt:"空"}}),e("p",[t._v("暂无通知")])])],1)}),1)],1),e("t-dialog",{attrs:{header:"删除通知",body:`确认删除通知：${t.selectedItem&&t.selectedItem.content}吗？`,visible:t.visible,onConfirm:t.deleteMsg},on:{"update:visible":function(a){t.visible=a}}})],1)},E=[];const g={};var N=j($,T,E,!1,H,"17806f17",null,null);function H(t){for(let s in g)this[s]=g[s]}const L=function(){return N.exports}();export{L as default};
